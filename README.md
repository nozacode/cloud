#  Go Load Balancer

–ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–≥–ª—è–¥–Ω—ã–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —è–∑—ã–∫–µ Go. –†–µ–∞–ª–∏–∑—É–µ—Ç:

- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º **round-robin** –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤  
- ‚úÖ **Health check** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤  
- ‚úÖ –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–∞–¥–µ–Ω–∏—é backend'–æ–≤  
- ‚úÖ **Graceful shutdown** –ø–æ —Å–∏–≥–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è  
- ‚úÖ –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

---


##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```

load-balancer/
‚îÇ
‚îú‚îÄ‚îÄ balancer/ # –õ–æ–≥–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –∏ health-check
‚îÇ ‚îî‚îÄ‚îÄ balancer.go
‚îÇ
‚îú‚îÄ‚îÄ handler/ # –ü—Ä–æ–∫—Å–∏-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ ‚îî‚îÄ‚îÄ proxy.go
‚îÇ
‚îú‚îÄ‚îÄ testhelpers/ # –¢–µ—Å—Ç–æ–≤—ã–µ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä—ã
‚îÇ ‚îî‚îÄ‚îÄ main.go
‚îÇ
‚îú‚îÄ‚îÄ go.mod
‚îî‚îÄ‚îÄ main.go # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞
```

---


##  –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

üìå **–ê–ª–≥–æ—Ä–∏—Ç–º Round-Robin:**  
–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã –ø–æ –∫—Ä—É–≥—É –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –Ω–∞ –∂–∏–≤–æ–π.

üìå **Health Check:**  
–ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è "ping" –∑–∞–ø—Ä–æ—Å –∫–æ –≤—Å–µ–º —Å–µ—Ä–≤–µ—Ä–∞–º. –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω, —Å–µ—Ä–≤–µ—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `–Ω–µ–∂–∏–≤–æ–π` –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ –≤—ã–¥–∞—á–∏.

üìå **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:**  
–ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ctrl+C), —Å–µ—Ä–≤–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É Health Check.

---

##  –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/yourname/load-balancer.git
```
```
cd load-balancer
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥—ã

```bash
go run testhelpers/main.go
```

–û–Ω–∏ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è –Ω–∞:

- http://localhost:8081
- http://localhost:8082
- http://localhost:8083

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∞–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫

```bash
go run main.go
```

–û–Ω –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –Ω–∞:

- http://localhost:8080

---

##  –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ curl-–∑–∞–ø—Ä–æ—Å–æ–≤:

```bash
curl http://localhost:8080
curl http://localhost:8080
curl http://localhost:8080
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Ä–∞–∑–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å round-robin –≤ –¥–µ–π—Å—Ç–≤–∏–∏.

–ï—Å–ª–∏ –≤—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ –Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω "–º–µ—Ä—Ç–≤".

---

##  –ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–æ–∫

- [ ] HTTP `/health` endpoint
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ IP –∫–ª–∏–µ–Ω—Ç–∞ –∏ backend —Å–µ—Ä–≤–µ—Ä–∞
- [ ] Sticky sessions / weighted round-robin
- [ ] Docker + docker-compose

---

##  –ü–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å

- –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (`net.DialTimeout`).
- –ê–ª–≥–æ—Ä–∏—Ç–º **round-robin** –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç "–º–µ—Ä—Ç–≤—ã–µ" backend'–∏.

---


*–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –Ω–∞ Go*